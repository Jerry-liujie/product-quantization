# hpc1.cse.cuhk.edu.hk:/research/jcheng2/xinyan/github/product-quantization> python run_imi_pq.py
# Parameters: dataset = imagenet, topK = 1000, codebook = 4, Ks = 256, metric = euclid
# load the base data ./data/imagenet/imagenet_base.fvecs,
# load the queries ./data/imagenet/imagenet_query.fvecs,
# load the ground truth ./data/imagenet/1000_imagenet_euclid_groundtruth.ivecs
#    Training the subspace: 0 / 2, 0 -> 75
#    Training the subspace: 1 / 2, 75 -> 150
# compress items
#    Training the subspace: 0 / 4, 0 -> 38
#    Training the subspace: 1 / 4, 38 -> 76
#    Training the subspace: 2 / 4, 76 -> 113
#    Training the subspace: 3 / 4, 113 -> 150

# probe 16 items
Probe, top-K, 00001.,  00002.,  00004.,  00008.,  00016.,  00032.,  00064.,  00128.,  00256.,  00512.,  01024.,  02048.,  04096.,  08192.,  16384.,  32768.,  65536.,  131072.,
   16,    1,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,  0.3050,
   16,   10,  0.0345,  0.0365,  0.0395,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,  0.0400,
   16,   20,  0.0177,  0.0200,  0.0220,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,  0.0222,
   16,   50,  0.0081,  0.0099,  0.0114,  0.0119,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,  0.0122,
   16,  100,  0.0044,  0.0058,  0.0071,  0.0074,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,  0.0076,
   16, 1000,  0.0006,  0.0010,  0.0015,  0.0019,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,  0.0022,

# probe 256 items
Probe, top-K, 00001.,  00002.,  00004.,  00008.,  00016.,  00032.,  00064.,  00128.,  00256.,  00512.,  01024.,  02048.,  04096.,  08192.,  16384.,  32768.,  65536.,  131072.,
  256,    1,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,  0.8700,
  256,   10,  0.0895,  0.1045,  0.1205,  0.1410,  0.1585,  0.1790,  0.1910,  0.1940,  0.1940,  0.1940,  0.1940,  0.1940,  0.1940,  0.1940,  0.1940,  0.1940,  0.1940,  0.1940,
  256,   20,  0.0455,  0.0563,  0.0683,  0.0838,  0.1020,  0.1212,  0.1337,  0.1380,  0.1385,  0.1385,  0.1385,  0.1385,  0.1385,  0.1385,  0.1385,  0.1385,  0.1385,  0.1385,
  256,   50,  0.0183,  0.0245,  0.0317,  0.0442,  0.0591,  0.0749,  0.0878,  0.0936,  0.0945,  0.0945,  0.0945,  0.0945,  0.0945,  0.0945,  0.0945,  0.0945,  0.0945,  0.0945,
  256,  100,  0.0092,  0.0130,  0.0182,  0.0275,  0.0388,  0.0532,  0.0650,  0.0704,  0.0720,  0.0720,  0.0720,  0.0720,  0.0720,  0.0720,  0.0720,  0.0720,  0.0720,  0.0720,
  256, 1000,  0.0010,  0.0016,  0.0028,  0.0048,  0.0082,  0.0136,  0.0204,  0.0266,  0.0289,  0.0289,  0.0289,  0.0289,  0.0289,  0.0289,  0.0289,  0.0289,  0.0289,  0.0289,

# probe 1024 items
Probe, top-K, 00001.,  00002.,  00004.,  00008.,  00016.,  00032.,  00064.,  00128.,  00256.,  00512.,  01024.,  02048.,  04096.,  08192.,  16384.,  32768.,  65536.,  131072.,
 1024,    1,  0.9500,  0.9550,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,  0.9600,
 1024,   10,  0.0960,  0.1140,  0.1405,  0.1755,  0.2130,  0.2560,  0.2960,  0.3235,  0.3400,  0.3430,  0.3430,  0.3430,  0.3430,  0.3430,  0.3430,  0.3430,  0.3430,  0.3430,
 1024,   20,  0.0480,  0.0613,  0.0790,  0.1030,  0.1373,  0.1810,  0.2257,  0.2575,  0.2795,  0.2830,  0.2835,  0.2835,  0.2835,  0.2835,  0.2835,  0.2835,  0.2835,  0.2835,
 1024,   50,  0.0192,  0.0257,  0.0364,  0.0528,  0.0777,  0.1131,  0.1547,  0.1885,  0.2130,  0.2190,  0.2196,  0.2196,  0.2196,  0.2196,  0.2196,  0.2196,  0.2196,  0.2196,
 1024,  100,  0.0096,  0.0138,  0.0204,  0.0318,  0.0497,  0.0760,  0.1120,  0.1459,  0.1732,  0.1820,  0.1832,  0.1832,  0.1832,  0.1832,  0.1832,  0.1832,  0.1832,  0.1832,
 1024, 1000,  0.0010,  0.0017,  0.0029,  0.0054,  0.0098,  0.0175,  0.0300,  0.0484,  0.0707,  0.0876,  0.0918,  0.0918,  0.0918,  0.0918,  0.0918,  0.0918,  0.0918,  0.0918,

# probe 4096 items
Probe, top-K, 00001.,  00002.,  00004.,  00008.,  00016.,  00032.,  00064.,  00128.,  00256.,  00512.,  01024.,  02048.,  04096.,  08192.,  16384.,  32768.,  65536.,  131072.,
 4096,    1,  0.9650,  0.9750,  0.9800,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,  0.9850,
 4096,   10,  0.0985,  0.1170,  0.1465,  0.1855,  0.2375,  0.3090,  0.3895,  0.4765,  0.5455,  0.5865,  0.6005,  0.6035,  0.6035,  0.6035,  0.6035,  0.6035,  0.6035,  0.6035,
 4096,   20,  0.0493,  0.0625,  0.0823,  0.1120,  0.1512,  0.2178,  0.3010,  0.3870,  0.4642,  0.5215,  0.5425,  0.5468,  0.5475,  0.5475,  0.5475,  0.5475,  0.5475,  0.5475,
 4096,   50,  0.0197,  0.0266,  0.0385,  0.0568,  0.0846,  0.1342,  0.2029,  0.2831,  0.3679,  0.4372,  0.4700,  0.4783,  0.4789,  0.4789,  0.4789,  0.4789,  0.4789,  0.4789,
 4096,  100,  0.0098,  0.0143,  0.0217,  0.0340,  0.0542,  0.0902,  0.1449,  0.2155,  0.2975,  0.3724,  0.4155,  0.4283,  0.4291,  0.4291,  0.4291,  0.4291,  0.4291,  0.4291,
 4096, 1000,  0.0010,  0.0017,  0.0031,  0.0056,  0.0104,  0.0192,  0.0354,  0.0622,  0.1043,  0.1638,  0.2255,  0.2632,  0.2690,  0.2690,  0.2690,  0.2690,  0.2690,  0.2690,

# probe 16384 items
Probe, top-K, 00001.,  00002.,  00004.,  00008.,  00016.,  00032.,  00064.,  00128.,  00256.,  00512.,  01024.,  02048.,  04096.,  08192.,  16384.,  32768.,  65536.,  131072.,
16384,    1,  0.9450,  0.9650,  0.9800,  0.9850,  0.9950,  0.9950,  0.9950,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,
16384,   10,  0.0955,  0.1170,  0.1470,  0.1895,  0.2475,  0.3210,  0.4180,  0.5345,  0.6495,  0.7495,  0.8190,  0.8510,  0.8610,  0.8620,  0.8620,  0.8620,  0.8620,  0.8620,
16384,   20,  0.0478,  0.0628,  0.0833,  0.1145,  0.1568,  0.2243,  0.3195,  0.4395,  0.5585,  0.6725,  0.7660,  0.8097,  0.8250,  0.8283,  0.8285,  0.8285,  0.8285,  0.8285,
16384,   50,  0.0191,  0.0266,  0.0390,  0.0584,  0.0882,  0.1388,  0.2166,  0.3202,  0.4392,  0.5698,  0.6797,  0.7492,  0.7775,  0.7825,  0.7829,  0.7829,  0.7829,  0.7829,
16384,  100,  0.0096,  0.0143,  0.0218,  0.0348,  0.0564,  0.0934,  0.1524,  0.2399,  0.3550,  0.4844,  0.6071,  0.6986,  0.7370,  0.7458,  0.7462,  0.7462,  0.7462,  0.7462,
16384, 1000,  0.0010,  0.0018,  0.0031,  0.0057,  0.0106,  0.0198,  0.0368,  0.0669,  0.1176,  0.1973,  0.3111,  0.4439,  0.5477,  0.5896,  0.5928,  0.5928,  0.5928,  0.5928,

# probe 65536 items
Probe, top-K, 00001.,  00002.,  00004.,  00008.,  00016.,  00032.,  00064.,  00128.,  00256.,  00512.,  01024.,  02048.,  04096.,  08192.,  16384.,  32768.,  65536.,  131072.,
65536,    1,  0.9450,  0.9650,  0.9750,  0.9850,  0.9950,  0.9950,  0.9950,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,  1.0000,
65536,   10,  0.0955,  0.1170,  0.1450,  0.1895,  0.2485,  0.3230,  0.4145,  0.5395,  0.6635,  0.7835,  0.8795,  0.9405,  0.9680,  0.9800,  0.9825,  0.9825,  0.9825,  0.9825,
65536,   20,  0.0478,  0.0628,  0.0825,  0.1145,  0.1570,  0.2235,  0.3165,  0.4415,  0.5680,  0.6987,  0.8215,  0.9060,  0.9507,  0.9703,  0.9755,  0.9762,  0.9762,  0.9762,
65536,   50,  0.0191,  0.0265,  0.0385,  0.0582,  0.0877,  0.1390,  0.2171,  0.3231,  0.4480,  0.5919,  0.7336,  0.8485,  0.9196,  0.9534,  0.9631,  0.9652,  0.9652,  0.9652,
65536,  100,  0.0095,  0.0143,  0.0215,  0.0347,  0.0560,  0.0935,  0.1527,  0.2425,  0.3616,  0.5047,  0.6550,  0.7941,  0.8878,  0.9365,  0.9528,  0.9553,  0.9553,  0.9553,
65536, 1000,  0.0010,  0.0018,  0.0031,  0.0057,  0.0106,  0.0198,  0.0369,  0.0670,  0.1190,  0.2029,  0.3280,  0.4925,  0.6675,  0.8072,  0.8783,  0.8951,  0.8958,  0.8958,